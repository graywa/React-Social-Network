(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[5],{306:function(e,t,s){e.exports={chat:"ChatPage_chat__1TNtx",messages:"ChatPage_messages__2UQBp",message:"ChatPage_message__fShj8",message_owner:"ChatPage_message_owner__2B0yV",message__content:"ChatPage_message__content__kK7S_",message__ava:"ChatPage_message__ava__1LXs7",message__user:"ChatPage_message__user__3KwRz",form__text:"ChatPage_form__text__2XTwi",form__button:"ChatPage_form__button__2prio"}},307:function(e,t,s){"use strict";s.r(t);var a=s(62),c=s(1),r=s(0),n=s.n(r),o=s(10),_=s(17),u=s(137),i=s(306),j=s.n(i),m=n.a.memo((function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.chat.status}));return Object(r.useEffect)((function(){return e(Object(u.b)()),function(){e(Object(u.d)())}}),[]),Object(c.jsxs)("div",{className:j.a.chat,children:["error"===t&&Object(c.jsx)("h2",{children:"Some error. Please refresh page"}),Object(c.jsx)(b,{}),Object(c.jsx)(h,{})]})})),b=function(){var e=Object(o.d)((function(e){return e.chat.messages})),t=Object(r.useRef)(null),s=Object(r.useState)(!0),n=Object(a.a)(s,2),_=n[0],u=n[1];Object(r.useEffect)((function(){var e;_&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]);return Object(c.jsxs)("div",{className:j.a.messages,onScroll:function(e){var t=e.currentTarget;t.scrollHeight-t.scrollTop-200<=t.clientHeight?u(!0):u(!1)},children:[e.map((function(e,t){return Object(c.jsx)(l,{message:e},e.id)})),Object(c.jsx)("div",{ref:t})]})},l=n.a.memo((function(e){var t=e.message,s=Object(o.d)((function(e){return e.authUser.userId}));return console.log(s),Object(c.jsxs)("div",{className:s===t.userId?j.a.message_owner:j.a.message,children:[Object(c.jsx)(_.b,{to:"/profile/".concat(t.userId),children:Object(c.jsx)("img",{className:j.a.message__ava,src:t.photo,alt:"avatar"})}),Object(c.jsxs)("div",{className:j.a.message__content,children:[Object(c.jsx)("h3",{className:j.a.message__user,children:t.userName}),Object(c.jsx)("p",{children:t.message})]})]})})),h=function(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),s=t[0],n=t[1],_=Object(o.c)(),i=Object(o.d)((function(e){return e.chat.status}));return Object(c.jsxs)("div",{className:j.a.form,children:[Object(c.jsx)("div",{className:j.a.form__text,children:Object(c.jsx)("textarea",{value:s,onChange:function(e){return n(e.currentTarget.value)},children:s})}),Object(c.jsx)("div",{className:j.a.form__button,children:Object(c.jsx)("button",{disabled:"ready"!==i,onClick:function(){s&&(_(Object(u.c)(s)),n(""))},children:"Send"})})]})};t.default=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(m,{})})}}}]);
//# sourceMappingURL=5.f5597516.chunk.js.map